<!doctype html>
<html lang="pt-BR" class="respect-color-scheme-preference">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>MEGA &#8211; blog do qgustavor</title>
<meta name='robots' content='noindex, nofollow' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="Feed para blog do qgustavor &raquo;" href="https://qgustavor.tk/feed/" />
<link rel="alternate" type="application/rss+xml" title="Feed de comentários para blog do qgustavor &raquo;" href="https://qgustavor.tk/comments/feed/" />
<link rel='stylesheet' id='wp-block-library-css'  href='https://qgustavor.tk/wp-includes/css/dist/block-library/style.min.css?ver=5.7.2' media='all' />
<link rel='stylesheet' id='wp-block-library-theme-css'  href='https://qgustavor.tk/wp-includes/css/dist/block-library/theme.min.css?ver=5.7.2' media='all' />
<link rel='stylesheet' id='twenty-twenty-one-style-css'  href='https://qgustavor.tk/wp-content/themes/twentytwentyone/style.css?ver=1.0.0' media='all' />
<style id='twenty-twenty-one-style-inline-css'>
:root{--global--color-background: #f2f2ff;--global--color-primary: #000;--global--color-secondary: #000;--button--color-background: #000;--button--color-text-hover: #000;}
</style>
<link rel='stylesheet' id='twenty-twenty-one-print-style-css'  href='https://qgustavor.tk/wp-content/themes/twentytwentyone/assets/css/print.css?ver=1.0.0' media='print' />
<link rel='stylesheet' id='tt1-dark-mode-css'  href='https://qgustavor.tk/wp-content/themes/twentytwentyone/assets/css/style-dark-mode.css?ver=1.0.0' media='all' />
<link rel="https://api.w.org/" href="https://qgustavor.tk/wp-json/" /><link rel="alternate" type="application/json" href="https://qgustavor.tk/wp-json/wp/v2/posts/403" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://qgustavor.tk/xmlrpc.php?rsd" />
<meta name="generator" content="WordPress 5.7.2" />
<link rel="canonical" href="https://qgustavor.tk/mega/" />
<link rel='shortlink' href='https://qgustavor.tk/?p=403' />
<link rel="alternate" type="application/json+oembed" href="https://qgustavor.tk/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fqgustavor.tk%2Fmega%2F" />
<link rel="alternate" type="text/xml+oembed" href="https://qgustavor.tk/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fqgustavor.tk%2Fmega%2F&#038;format=xml" />
		<style>
			.algolia-search-highlight {
				background-color: #fffbcc;
				border-radius: 2px;
				font-style: normal;
			}
		</style>
		<style id="custom-background-css">
body.custom-background { background-color: #f2f2ff; }
</style>
	</head>

<body class="post-template-default single single-post postid-403 single-format-standard custom-background wp-embed-responsive is-light-theme has-background-white no-js singular has-main-navigation">
<div id="page" class="site">
	<a class="skip-link screen-reader-text" href="#content">Pular para o conteúdo</a>

	
<header id="masthead" class="site-header has-title-and-tagline has-menu" role="banner">

	

<div class="site-branding">

	
						<p class="site-title"><a href="https://qgustavor.tk/">blog do qgustavor</a></p>
			
	</div><!-- .site-branding -->
	
	<nav id="site-navigation" class="primary-navigation" role="navigation" aria-label="Menu primário">
		<div class="menu-button-container">
			<button id="primary-mobile-menu" class="button" aria-controls="primary-menu-list" aria-expanded="false">
				<span class="dropdown-icon open">Menu					<svg class="svg-icon" width="24" height="24" aria-hidden="true" role="img" focusable="false" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.5 6H19.5V7.5H4.5V6ZM4.5 12H19.5V13.5H4.5V12ZM19.5 18H4.5V19.5H19.5V18Z" fill="currentColor"/></svg>				</span>
				<span class="dropdown-icon close">Fechar					<svg class="svg-icon" width="24" height="24" aria-hidden="true" role="img" focusable="false" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 10.9394L5.53033 4.46973L4.46967 5.53039L10.9393 12.0001L4.46967 18.4697L5.53033 19.5304L12 13.0607L18.4697 19.5304L19.5303 18.4697L13.0607 12.0001L19.5303 5.53039L18.4697 4.46973L12 10.9394Z" fill="currentColor"/></svg>				</span>
			</button><!-- #primary-mobile-menu -->
		</div><!-- .menu-button-container -->
		<div class="primary-menu-container"><ul id="primary-menu-list" class="menu-wrapper"><li id="menu-item-20" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-20"><a href="/">Início</a></li>
<li id="menu-item-670" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-670"><a href="https://qgustavor.tk/projetos/">Projetos</a></li>
<li id="menu-item-680" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-680"><a href="/search">Pesquisa</a></li>
</ul></div>	</nav><!-- #site-navigation -->

</header><!-- #masthead -->

	<div id="content" class="site-content">
		<div id="primary" class="content-area">
			<main id="main" class="site-main" role="main">

<article id="post-403" class="post-403 post type-post status-publish format-standard hentry category-postagens entry">

	<header class="entry-header alignwide">
		<h1 class="entry-title">MEGA</h1>			</header><!-- .entry-header -->

	<div class="entry-content">
		<p>Não é a primeira vez que eu posto sobre o MEGA: a primeira vez que falei dele era reclamando da SDK dele que não me ajudou em nada. Agora quero escrever por que mesmo assim eu gostei do site, o que eu fiz em relação a ele e o que acho que poderá acontecer pela frente.</p>
<p>Como qualquer sabe &#8211; ou se quiser saber dá para achar na Wikipédia &#8211; o MEGA é o descendente do MegaUpload, que foi fechado por problemas legais, como, por exemplo, hospedar diversos arquivos ilegais. Uma das grandes fontes de renda do MegaUpload era as contas pagas, que tinham recursos como maior capacidade de armazenamento e transferência de dados. Claro que os desenvolvedores não queriam perder essa oportunidade de ganhar dinheiro, mas também não queriam ser processados novamente, então criaram o MEGA.</p>
<p>O MEGA, assim como o MegaUpload, é um site de hospedagem de arquivos. Também funciona baseado no modelo de contas pagas. Só que tem uma diferença essencial: enquanto o MegaUpload guardava os arquivos exatamente iguais a maneira que foi enviado, isso é, era possível saber o que estava nos servidores do serviço; o MEGA usa criptografia para evitar isso. Em outras palavras, ninguém pode acusar eles de infringir nenhum copyright se não tiverem como descriptografar os arquivos. Mas descriptografar os arquivos deveria ser fácil, só olhar onde os arquivos são compartilhados, não é? Aí que a coisa fica boa para eles: quando se faz isso fica claro que quem está infringindo copyrights não são eles, porém os usuários, e eles se safam.</p>
<p>Só que nem tudo são flores: como eles fizeram isso com o único objetivo de evitar problemas judiciais a segurança não é tão boa. Mal lançaram o serviço e vieram um enxame de especialistas de criptografia criticando. Para começar: é um site, navegadores não oferecem segurança suficiente para qualquer aplicação que precise de criptografia, pois sempre o servidor onde a aplicação resiste que terá o controle.</p>
<p>Vamos comparar o modelo &quot;site&quot; com o modelo “extensão” ou o modelo “aplicativo de celular”: em ambos você tem que assinar digitalmente o seu arquivo e publicá-lo em uma loja. Enquanto invadir o servidor é suficiente para tirar toda a segurança de um site no caso dos outros modelos é preciso ter acesso a chave que assina o aplicativo e acesso as credenciais da loja. Não é um modelo perfeito, porém melhor que sites.</p>
<p>Não é atoa que o MEGA lançou aplicativos e extensões. Vários. Tem para Chrome, Firefox, Windows, Android e iOS. Quem quiser segurança baixe elas, quem quiser mais segurança ainda desative as atualizações automáticas &#8211; uma função que o Android e o Firefox suportam &#8211; e verifique cada atualização manualmente. Só que mesmo assim isso não é seguro: primeiro que ninguém verifica o código deles &#8211; perguntei no reddit isso, ninguém verifica &#8211; segundo que o código deles era, faz muito tempo, muito bagunçado, e de um tempo para cá deram uma melhorada na escrita, mas não corrigiram boa parte dos erros de segurança para não quebrar a compatibilidade com os clientes já existentes.</p>
<p>Já faz um tempo eu venho criando ferramentas para o MEGA. Minha maior motivação são, claro, animes, em especial, fansubs que usam o serviço. O pessoal delas reclama frequentemente que os arquivos são apagados, o que não faz muito sentido já que os dados são criptografados. Então criei o <a href="https://safeme.ga/">safeme.ga</a> que possibilita criar senhas em pastas do MEGA, que acaba impedindo que robôs possam acessar o conteúdo dos arquivos e removê-los. Obviamente ninguém usou, mas foi um bom experimento, aproveitei para implementar um sistema de segurança baseado em service workers que dá mais segurança a sites tirando o controle do servidor.</p>
<p>Pensaram que o problema fosse outro: não são robôs removendo os arquivo, porém a concorrência que está denunciando eles. Então criei o <a href="https://directme.ga/">directme.ga</a>, que tinha, entre outros objetivos, permitir que continuassem hospedando arquivos no MEGA porém sem que o caminho do arquivo fosse revelado, ou, melhor ainda, possibilitando que os arquivos fossem acessados sem precisar nem de baixar eles &#8211; uma função que nunca deu certo já que navegadores não reproduzem os formatos utilizados.</p>
<p>Para criar esse site eu peguei a biblioteca <a href="https://www.npmjs.com/package/mega/">mega</a> no NPM e <a href="https://github.com/qgustavor/mega">tentei atualizá-la</a> para uma versão mais moderna, suportando o mega.nz e resolvendo problemas de compatibilidade com navegadores modernos &#8211; já que ela é muito velha e usa funções que não existem mais. Eu ainda queria adicionar o suporte a pastas, mas como o directme.ga não foi para frente não terminei ela.</p>
<p>Recentemente &#8211; isso é, ontem e hoje &#8211; consegui implementar o download de arquivos em pastas. É até simples de fazer isso: o site usa a velha criptografia AES, usando chaves de &#8211; só &#8211; 128 bits, no modo ECB para criptografar chaves (isso é, quando a chave de compartilhamento das pastas criptografa as chaves dos arquivos nelas) e no modo CBC para criptografar atributos dos arquivos e os arquivos em si. As chaves não são derivadas, porém completamente aleatórias, talvez por isso eles escolheram adotar como vetor de iniciação valores nulos, o que, na verdade, não é muito comum.</p>
<p>Acontece que eu acabei implementando isso tudo sozinho por um motivo: como eu disse antes quem gosta de criptografia não gosta do MEGA. Aliás, a situação dele está tão ruim que quem criou ele vendeu, resolveu fazer outro site e ficou falando que não é mais seguro usar ele. Bem, eu continuo usando pois evito utilizar as versões inseguras dele, isso é, o site e extensões, que supostamente tiveram mudanças que não são tão agradáveis. Não sei por quanto tempo isso será possível, mas estou aproveitando como posso.</p>
	</div><!-- .entry-content -->

	<footer class="entry-footer default-max-width">
		<div class="posted-by"><span class="posted-on">Publicado em <time class="entry-date published updated" datetime="2016-08-16T03:09:02-03:00">16/08/2016</time></span><span class="byline">Por <a href="https://qgustavor.tk/author/qgustavor/" rel="author">qgustavor</a></span></div><div class="post-taxonomies"><span class="cat-links">Categorizado como <a href="https://qgustavor.tk/category/postagens/" rel="category tag">Postagens</a> </span></div>	</footer><!-- .entry-footer -->

				
</article><!-- #post-403 -->

	<nav class="navigation post-navigation" role="navigation" aria-label="Posts">
		<h2 class="screen-reader-text">Navegação de Post</h2>
		<div class="nav-links"><div class="nav-previous"><a href="https://qgustavor.tk/ghost-in-the-shell/" rel="prev"><p class="meta-nav"><svg class="svg-icon" width="24" height="24" aria-hidden="true" role="img" focusable="false" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M20 13v-2H8l4-4-1-2-7 7 7 7 1-2-4-4z" fill="currentColor"/></svg>Post anterior</p><p class="post-title">GHOST IN THE SHELL</p></a></div><div class="nav-next"><a href="https://qgustavor.tk/rakudai-kishi-no-cavalry/" rel="next"><p class="meta-nav">Próximo post<svg class="svg-icon" width="24" height="24" aria-hidden="true" role="img" focusable="false" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="m4 13v-2h12l-4-4 1-2 7 7-7 7-1-2 4-4z" fill="currentColor"/></svg></p><p class="post-title">Rakudai Kishi no Cavalry</p></a></div></div>
	</nav>			</main><!-- #main -->
		</div><!-- #primary -->
	</div><!-- #content -->

	
	<aside class="widget-area">
		<section id="search-2" class="widget widget_search"><form role="search"  method="get" class="search-form" action="https://qgustavor.tk/">
	<label for="search-form-1">Pesquisar&hellip;</label>
	<input type="search" id="search-form-1" class="search-field" value="" name="s" />
	<input type="submit" class="search-submit" value="Pesquisar" />
</form>
</section>	</aside><!-- .widget-area -->


	<footer id="colophon" class="site-footer" role="contentinfo">

					<nav aria-label="Menu secundário" class="footer-navigation">
				<ul class="footer-navigation-wrapper">
					<li id="menu-item-25" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-25"><a href="https://twitter.com/qgustavor"><svg class="svg-icon" width="24" height="24" aria-hidden="true" role="img" focusable="false" width="24" height="24" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M22.23,5.924c-0.736,0.326-1.527,0.547-2.357,0.646c0.847-0.508,1.498-1.312,1.804-2.27 c-0.793,0.47-1.671,0.812-2.606,0.996C18.324,4.498,17.257,4,16.077,4c-2.266,0-4.103,1.837-4.103,4.103 c0,0.322,0.036,0.635,0.106,0.935C8.67,8.867,5.647,7.234,3.623,4.751C3.27,5.357,3.067,6.062,3.067,6.814 c0,1.424,0.724,2.679,1.825,3.415c-0.673-0.021-1.305-0.206-1.859-0.513c0,0.017,0,0.034,0,0.052c0,1.988,1.414,3.647,3.292,4.023 c-0.344,0.094-0.707,0.144-1.081,0.144c-0.264,0-0.521-0.026-0.772-0.074c0.522,1.63,2.038,2.816,3.833,2.85 c-1.404,1.1-3.174,1.756-5.096,1.756c-0.331,0-0.658-0.019-0.979-0.057c1.816,1.164,3.973,1.843,6.29,1.843 c7.547,0,11.675-6.252,11.675-11.675c0-0.178-0.004-0.355-0.012-0.531C20.985,7.47,21.68,6.747,22.23,5.924z"></path></svg><span class="screen-reader-text">Twitter</a></li>
<li id="menu-item-667" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-667"><a href="https://github.com/qgustavor/"><svg class="svg-icon" width="24" height="24" aria-hidden="true" role="img" focusable="false" width="24" height="24" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M12,2C6.477,2,2,6.477,2,12c0,4.419,2.865,8.166,6.839,9.489c0.5,0.09,0.682-0.218,0.682-0.484 c0-0.236-0.009-0.866-0.014-1.699c-2.782,0.602-3.369-1.34-3.369-1.34c-0.455-1.157-1.11-1.465-1.11-1.465 c-0.909-0.62,0.069-0.608,0.069-0.608c1.004,0.071,1.532,1.03,1.532,1.03c0.891,1.529,2.341,1.089,2.91,0.833 c0.091-0.647,0.349-1.086,0.635-1.337c-2.22-0.251-4.555-1.111-4.555-4.943c0-1.091,0.39-1.984,1.03-2.682 C6.546,8.54,6.202,7.524,6.746,6.148c0,0,0.84-0.269,2.75,1.025C10.295,6.95,11.15,6.84,12,6.836 c0.85,0.004,1.705,0.114,2.504,0.336c1.909-1.294,2.748-1.025,2.748-1.025c0.546,1.376,0.202,2.394,0.1,2.646 c0.64,0.699,1.026,1.591,1.026,2.682c0,3.841-2.337,4.687-4.565,4.935c0.359,0.307,0.679,0.917,0.679,1.852 c0,1.335-0.012,2.415-0.012,2.741c0,0.269,0.18,0.579,0.688,0.481C19.138,20.161,22,16.416,22,12C22,6.477,17.523,2,12,2z"></path></svg><span class="screen-reader-text">GitHub</a></li>
<li id="menu-item-666" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-666"><a href="https://anilist.co/user/qgustavor/"><svg class="svg-icon" width="24" height="24" aria-hidden="true" role="img" focusable="false" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid" viewBox="0 0 172 172"><path opacity="0.5" d="M111 111V41c0-4-2-6-6-6H91c-4 0-6 2-6 6v33l9 7c7 26 2 48-5 49 11 1 12 6 4 2 1-14 6-14 20 0l3 5h32c4 0 6-2 6-6v-14c0-4-2-6-6-6h-37z"/><path d="M54 35L18 137h28l6-17h31l6 17h28L81 35H54zm5 62l9-29 9 29H59z"/></svg><span class="screen-reader-text">AniList</a></li>
				</ul><!-- .footer-navigation-wrapper -->
			</nav><!-- .footer-navigation -->
				<div class="site-info">
			<div class="site-name">
																						<a href="https://qgustavor.tk/">blog do qgustavor</a>
																		</div><!-- .site-name -->
			<div class="powered-by">
				Orgulhosamente desenvolvido com <a href="https://br.wordpress.org/">WordPress</a>.			</div><!-- .powered-by -->

		</div><!-- .site-info -->
	</footer><!-- #colophon -->

</div><!-- #page -->

<script>
    document.querySelectorAll('form').forEach((form, index) => {
        const formAction = form.getAttribute('action');

        // TODO: check after stripping Site URL that result is '/' or '', to not affect
        // forms targeting /wp-admin.php etc
        const replacedFormAction = formAction.replace('https://qgustavor.tk', '' );

        console.log('replaced form action: ' + replacedFormAction);

        if ( replacedFormAction === '' || replacedFormAction === '/' ) {
            form.setAttribute( 'action', '/search/' );
        }
    });

</script>
<script>document.body.classList.remove("no-js");</script><button id="dark-mode-toggler" class="fixed-bottom" aria-pressed="false" onClick="toggleDarkMode()">Modo escuro: <span aria-hidden="true"></span></button>		<style>
			#dark-mode-toggler > span {
				margin-left: 5px;
			}
			#dark-mode-toggler > span::before {
				content: 'Desligado';
			}
			#dark-mode-toggler[aria-pressed="true"] > span::before {
				content: 'Ligado';
			}
					</style>

		<script>function toggleDarkMode() { // jshint ignore:line
	var toggler = document.getElementById( 'dark-mode-toggler' );

	if ( 'false' === toggler.getAttribute( 'aria-pressed' ) ) {
		toggler.setAttribute( 'aria-pressed', 'true' );
		document.documentElement.classList.add( 'is-dark-theme' );
		document.body.classList.add( 'is-dark-theme' );
		window.localStorage.setItem( 'twentytwentyoneDarkMode', 'yes' );
	} else {
		toggler.setAttribute( 'aria-pressed', 'false' );
		document.documentElement.classList.remove( 'is-dark-theme' );
		document.body.classList.remove( 'is-dark-theme' );
		window.localStorage.setItem( 'twentytwentyoneDarkMode', 'no' );
	}
}

function twentytwentyoneIsDarkMode() {
	var isDarkMode = window.matchMedia( '(prefers-color-scheme: dark)' ).matches;

	if ( 'yes' === window.localStorage.getItem( 'twentytwentyoneDarkMode' ) ) {
		isDarkMode = true;
	} else if ( 'no' === window.localStorage.getItem( 'twentytwentyoneDarkMode' ) ) {
		isDarkMode = false;
	}

	return isDarkMode;
}

function darkModeInitialLoad() {
	var toggler = document.getElementById( 'dark-mode-toggler' ),
		isDarkMode = twentytwentyoneIsDarkMode();

	if ( isDarkMode ) {
		document.documentElement.classList.add( 'is-dark-theme' );
		document.body.classList.add( 'is-dark-theme' );
	} else {
		document.documentElement.classList.remove( 'is-dark-theme' );
		document.body.classList.remove( 'is-dark-theme' );
	}

	if ( toggler && isDarkMode ) {
		toggler.setAttribute( 'aria-pressed', 'true' );
	}
}

function darkModeRepositionTogglerOnScroll() {

	var toggler = document.getElementById( 'dark-mode-toggler' ),
		prevScroll = window.scrollY || document.documentElement.scrollTop,
		currentScroll,

		checkScroll = function() {
			currentScroll = window.scrollY || document.documentElement.scrollTop;
			if (
				currentScroll + ( window.innerHeight * 1.5 ) > document.body.clientHeight ||
				currentScroll < prevScroll
			) {
				toggler.classList.remove( 'hide' );
			} else if ( currentScroll > prevScroll && 250 < currentScroll ) {
				toggler.classList.add( 'hide' );
			}
			prevScroll = currentScroll;
		};

	if ( toggler ) {
		window.addEventListener( 'scroll', checkScroll );
	}
}

darkModeInitialLoad();
darkModeRepositionTogglerOnScroll();
</script>	<script>
	if ( -1 !== navigator.userAgent.indexOf( 'MSIE' ) || -1 !== navigator.appVersion.indexOf( 'Trident/' ) ) {
		document.body.classList.add( 'is-IE' );
	}
	</script>
	<script type="text/javascript">var algolia = {"debug":false,"application_id":"ENUJEVMZVE","search_api_key":"4aaa29daeb6f57235e9cea4cfb79e597","powered_by_enabled":true,"query":"","autocomplete":{"sources":[],"input_selector":"input[name='s']:not('.no-autocomplete')"},"indices":{"searchable_posts":{"name":"wp_searchable_posts","id":"searchable_posts","enabled":true,"replicas":[]}}};</script><script id='twenty-twenty-one-ie11-polyfills-js-after'>
( Element.prototype.matches && Element.prototype.closest && window.NodeList && NodeList.prototype.forEach ) || document.write( '<script src="https://qgustavor.tk/wp-content/themes/twentytwentyone/assets/js/polyfills.js?ver=1.0.0"></scr' + 'ipt>' );
</script>
<script src='https://qgustavor.tk/wp-content/themes/twentytwentyone/assets/js/primary-navigation.js?ver=1.0.0' id='twenty-twenty-one-primary-navigation-script-js'></script>
<script src='https://qgustavor.tk/wp-content/themes/twentytwentyone/assets/js/responsive-embeds.js?ver=1.0.0' id='twenty-twenty-one-responsive-embeds-script-js'></script>
	<script>
	/(trident|msie)/i.test(navigator.userAgent)&&document.getElementById&&window.addEventListener&&window.addEventListener("hashchange",(function(){var t,e=location.hash.substring(1);/^[A-z0-9_-]+$/.test(e)&&(t=document.getElementById(e))&&(/^(?:a|select|input|button|textarea)$/i.test(t.tagName)||(t.tabIndex=-1),t.focus())}),!1);
	</script>
	
</body>
</html>
