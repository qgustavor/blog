<!doctype html>
<html lang="pt-BR" class="respect-color-scheme-preference">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>10-bit é uma mentira &#8211; blog do qgustavor</title>
<meta name='robots' content='noindex, nofollow' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="Feed para blog do qgustavor &raquo;" href="https://qgustavor.tk/feed/" />
<link rel="alternate" type="application/rss+xml" title="Feed de comentários para blog do qgustavor &raquo;" href="https://qgustavor.tk/comments/feed/" />
<link rel='stylesheet' id='wp-block-library-css'  href='https://qgustavor.tk/wp-includes/css/dist/block-library/style.min.css?ver=5.7.2' media='all' />
<link rel='stylesheet' id='wp-block-library-theme-css'  href='https://qgustavor.tk/wp-includes/css/dist/block-library/theme.min.css?ver=5.7.2' media='all' />
<link rel='stylesheet' id='twenty-twenty-one-style-css'  href='https://qgustavor.tk/wp-content/themes/twentytwentyone/style.css?ver=1.0.0' media='all' />
<style id='twenty-twenty-one-style-inline-css'>
:root{--global--color-background: #f2f2ff;--global--color-primary: #000;--global--color-secondary: #000;--button--color-background: #000;--button--color-text-hover: #000;}
</style>
<link rel='stylesheet' id='twenty-twenty-one-print-style-css'  href='https://qgustavor.tk/wp-content/themes/twentytwentyone/assets/css/print.css?ver=1.0.0' media='print' />
<link rel='stylesheet' id='tt1-dark-mode-css'  href='https://qgustavor.tk/wp-content/themes/twentytwentyone/assets/css/style-dark-mode.css?ver=1.0.0' media='all' />
<link rel="https://api.w.org/" href="https://qgustavor.tk/wp-json/" /><link rel="alternate" type="application/json" href="https://qgustavor.tk/wp-json/wp/v2/posts/151" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://qgustavor.tk/xmlrpc.php?rsd" />
<meta name="generator" content="WordPress 5.7.2" />
<link rel="canonical" href="https://qgustavor.tk/10bit/" />
<link rel='shortlink' href='https://qgustavor.tk/?p=151' />
<link rel="alternate" type="application/json+oembed" href="https://qgustavor.tk/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fqgustavor.tk%2F10bit%2F" />
<link rel="alternate" type="text/xml+oembed" href="https://qgustavor.tk/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fqgustavor.tk%2F10bit%2F&#038;format=xml" />
		<style>
			.algolia-search-highlight {
				background-color: #fffbcc;
				border-radius: 2px;
				font-style: normal;
			}
		</style>
		<style id="custom-background-css">
body.custom-background { background-color: #f2f2ff; }
</style>
	</head>

<body class="post-template-default single single-post postid-151 single-format-standard custom-background wp-embed-responsive is-light-theme has-background-white no-js singular has-main-navigation">
<div id="page" class="site">
	<a class="skip-link screen-reader-text" href="#content">Pular para o conteúdo</a>

	
<header id="masthead" class="site-header has-title-and-tagline has-menu" role="banner">

	

<div class="site-branding">

	
						<p class="site-title"><a href="https://qgustavor.tk/">blog do qgustavor</a></p>
			
	</div><!-- .site-branding -->
	
	<nav id="site-navigation" class="primary-navigation" role="navigation" aria-label="Menu primário">
		<div class="menu-button-container">
			<button id="primary-mobile-menu" class="button" aria-controls="primary-menu-list" aria-expanded="false">
				<span class="dropdown-icon open">Menu					<svg class="svg-icon" width="24" height="24" aria-hidden="true" role="img" focusable="false" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.5 6H19.5V7.5H4.5V6ZM4.5 12H19.5V13.5H4.5V12ZM19.5 18H4.5V19.5H19.5V18Z" fill="currentColor"/></svg>				</span>
				<span class="dropdown-icon close">Fechar					<svg class="svg-icon" width="24" height="24" aria-hidden="true" role="img" focusable="false" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 10.9394L5.53033 4.46973L4.46967 5.53039L10.9393 12.0001L4.46967 18.4697L5.53033 19.5304L12 13.0607L18.4697 19.5304L19.5303 18.4697L13.0607 12.0001L19.5303 5.53039L18.4697 4.46973L12 10.9394Z" fill="currentColor"/></svg>				</span>
			</button><!-- #primary-mobile-menu -->
		</div><!-- .menu-button-container -->
		<div class="primary-menu-container"><ul id="primary-menu-list" class="menu-wrapper"><li id="menu-item-20" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-20"><a href="/">Início</a></li>
<li id="menu-item-670" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-670"><a href="https://qgustavor.tk/projetos/">Projetos</a></li>
<li id="menu-item-680" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-680"><a href="/search">Pesquisa</a></li>
</ul></div>	</nav><!-- #site-navigation -->

</header><!-- #masthead -->

	<div id="content" class="site-content">
		<div id="primary" class="content-area">
			<main id="main" class="site-main" role="main">

<article id="post-151" class="post-151 post type-post status-publish format-standard hentry category-postagens entry">

	<header class="entry-header alignwide">
		<h1 class="entry-title">10-bit é uma mentira</h1>			</header><!-- .entry-header -->

	<div class="entry-content">
		<p>Ou melhor, geralmente, muito do que é dito sobre 10-bit é uma mentira.</p>
<p>Não é a primeira vez que eu posto sobre isso. Aliás, acho que a minha postagem anterior ficou até ruim porque misturei bit depth com chroma subsampling. Bem, no fim das coisas as duas coisas se misturam porque, embora 8-bit e 10-bit são definições distintas de bit depth os grupos confundem esses termos com profiles. Tentarei não cometer esse erro.</p>
<p>Mas por que eu estou postando novamente sobre isso? Primeiro, porque vi uma discussão sobre esse assunto em um chat de uma fansub onde uma imagem similar a esta¹ foi postada:</p>
<p><img src="https://i.imgur.com/XUifVdX.png" alt="" /></p>
<p><em>Eu coloquei as aspas.</em> Considerando que vários grupos usam 10-bit é normal que quem os acompanhe tenha dúvidas sobre o que é isso e, nesse tipo de situação, é absurdamente comum usarem esse tipo de imagem para explicar. Alguns grupos também postam links para sites explicando o assunto, algumas vezes no contexto de vídeos, mas é muito mais frequente ver grupos postando explicações em outros contextos, como o de fotografias.</p>
<p>Vou explicar porque essa imagem está errada e é, ao mínimo, super-simplificação, mas antes, o segundo motivo para essa postagem:</p>
<p>Estou assistindo a segunda temporada daquele anime onde o protagonista pega garotas em uma Dungeon e em vários episódios estou notando o principal problema que o 10-bit deveria resolver: banding &#8211; em outras palavras &#8211; é possível ver faixas de cores no vídeo.</p>
<p><img src="https://i.imgur.com/g95IG7u.png" alt="" /></p>
<p>A imagem acima é de uma fansub que supostamente lança 10-bit para evitar justamente esse problema de banding, mesmo assim, como podemos ver, o problema não foi resolvido.</p>
<p><strong>Então&#8230;</strong> por que 10-bit é geralmente uma mentira? Porque as razões apresentadas pelos grupos para usar essa configuração de bit depth são, na maioria dos casos, diferentes das razões reais desses grupos.</p>
<p>Voltando a primeira imagem, ela está errada por vários motivos. Em primeiro lugar, ambas são 8-bit. Estão exagerando os resultados para facilitar a compreensão? Que postem então um exemplo real.</p>
<p>Para começar comparar bit depth usando cores é complicado porque 8-bit e 10-bit se referem à quantidade de bits usados para cada cor em cada canal da imagem. Nesse caso é melhor trabalharmos com um único canal, ou seja, com uma imagem em preto e branco.</p>
<p>Infelizmente não posso postar uma imagem 10-bit real &#8211; até onde testei navegadores não suportam isso &#8211; mas vou simular usando dithering:</p>
<p><img src="https://i.imgur.com/9G7KAEc.png" alt="" /></p>
<p>Para melhor ilustrar a situação deixei em vermelho o que <em>deveria</em> acontecer se alguém copiar a imagem em um programa como o Paint, pegar a ferramenta &quot;fill&quot; (a do balde) e pintar um ponto. Experimente isso você mesmo.</p>
<p>Os gradientes dessa imagem tem 473 pixels de largura. Uma imagem cujas cores são definidas apenas por 8 bits conseguem ter uma variação de apenas 256 valores distintos, por tanto no gradiente abaixo algumas cores precisam se repetir, causando as faixas de cores. Se 10 bits forem usados, é possível ter uma variação de 1024 valores e assim as faixas são evitadas.</p>
<p><em>Por esse motivo</em> é importante que alguém que trabalhe com imagens e vídeos use um bit depth maior quando possível: ter mais bits na imagem significa ter mais cores para trabalhar e assim minimizar o acúmulo de erros que pode ocorrer entre os vários processos envolvidos.</p>
<p><strong>Mas</strong> isso não significa que 10-bit deve ser usado para distribuir o seu trabalho, por um motivo: compatibilidade. E não falo de compatibilidade com computadores velhos ou celulares e sim em geral:</p>
<p>No contexto de imagens não consegui encontrar um aplicativo sequer que conseguisse gerar ou mostrar uma imagem com um gradiente com 1024 de largura, de preto para branco, como o acima, sem banding. Testei o Photoshop, o ImageMagick, Nomacs, Chrome, Firefox.</p>
<p>No contexto de vídeos a situação é melhor: há players que conseguem simular 10-bit usando dithering e até há suporte para decodificação em hardware de H.265/HEVC e VP9 10-bit. Por outro lado esse hardware é relativamente novo: <a href="https://software.intel.com/en-us/articles/enable-10bpp">nos processadores da Intel</a> essa tecnologia é suportada desde 2016 &#8211; logo nem o meu celular, que é de 2015, nem o meu computador, de 2011, suportam isso.</p>
<p>Se você não se importa com compatibilidade, que nem vários grupos fazem, o ideal seria usar AV1, HEVC ou VP9 10-bit, mas não H264, já que o suporte a H264 10-bit é bem menor e ele está ultrapassado de qualquer forma. Agora, se compatibilidade é um problema, use 8-bit: o meu celular não é ruim, ele roda HEVC Full HD &#8211; inclusive faz isso bem melhor do que o meu computador &#8211; mas não roda HEVC 10-bit.</p>
<p>Como praticamente todas as empresas que distribuem anime se preocupam com compatibilidade por não poderem dizer para seus clientes “baixe o MPV senão os arquivos não vão rodar direito”² elas distribuem anime em 8-bit.</p>
<p>Porque há grupos que insistem em usar 10-bit? Porque é mais fácil comprimir uma imagem com mais cores do que uma com menos cores, então os arquivos ficam menores. É difícil entender isso no início &#8211; afinal, se há mais cores logicamente o arquivo deveria ser maior, certo? &#8211; mas não é isso que acontece: com mais cores o encoder tem mais informações para processar a imagem e assim consegue trabalhar melhor.</p>
<p>Como as empresas distribuem os animes em 8-bit e os grupos geralmente não invadem os computadores das empresas de animação para conseguir as imagens originais eles tem que trabalhar com imagens em 8-bit. Como que eles convertem vídeos 8-bit para 10-bit? Olhe a imagem acima: ou não convertem, ou, se estão tentando, o trabalho deles é mal feito que nem dá para notar diferença.</p>
<p>Para concluir, sabem o que eu acho pior? Vários grupos usam 10-bit &#8211; que deveria representar que se preocupam com qualidade &#8211; mas deixam outras configurações de modo que a qualidade fica pior. Uma configuração que mais me incomoda é o chroma subsampling:</p>
<p><img src="https://i.imgur.com/XswK3kR.png" alt="" /></p>
<p>É possível notar que as transições de cores no 4:2:0 são mais borradas do que no 4:4:4, isso acontece porque os canais que armazenam as cores tem uma resolução <em>quatro vezes menor</em> no 4:2:0 do que no 4:4:4.</p>
<p>Isso é comum, absurdamente comum: em uma seleção de centenas de vídeos de vários grupos (bons e ruins, novos e antigos, rápidos e lentos), embora 48% deles é 10-bit, por outro lado 93% é 4:2:0 e <strong>só</strong> 6% é 4:4:4.</p>
<p>Esses grupos podem justificar que não usam porque, assim como na questão do bit depth, eles precisam simular uma qualidade maior, mas se usassem essa justificativa então não teriam como justificar o uso de 10-bit. Aposto que só não usam 4:4:4 por um motivo: porque isso não ajudar diminuir o tamanho do arquivo.</p>
<p>Em resumo:</p>
<ul>
<li>Grupos que dizem que 10-bit tem mais qualidade desconsideram o fato de que como as raws são 8-bit isso significa tirar qualidade de onde não existe.</li>
<li>Grupos que usam 10-bit não se preocupam com compatibilidade porém com o tamanho dos arquivos (o que pode ser um indício de falta de qualidade).</li>
<li>Caso algum grupo use 10-bit para reduzir o tamanho do arquivo, que não poste aquela imagem em uma tentativa falha de justificar qualidade.</li>
<li>Caso algum grupo use 10-bit para melhorar a qualidade, que estude encoding a sério e não fique contendo lorota.</li>
<li>Grupos que lançam H264 10-bit não sabem o que estão fazendo.</li>
<li>Grupos que usam 10-bit e 4:2:0 sabem menos ainda.</li>
</ul>
<p>¹ Não vou postar a imagem original tentando proteger a fansub. Meu objetivo não é falar mal desse grupo: eles fazem um bom trabalho&#8230; apesar do fato desse erro deles mostrar que não ou sabem muito sobre encoding ou não sabem explicar isso bem.</p>
<p>² A Crunchyroll parece ser uma exceção: se o player deles não funcionar no seu navegador eles te mandam baixar outro. ¯_(ツ)_/¯</p>
	</div><!-- .entry-content -->

	<footer class="entry-footer default-max-width">
		<div class="posted-by"><span class="posted-on">Publicado em <time class="entry-date published updated" datetime="2019-10-30T03:51:43-03:00">30/10/2019</time></span><span class="byline">Por <a href="https://qgustavor.tk/author/qgustavor/" rel="author">qgustavor</a></span></div><div class="post-taxonomies"><span class="cat-links">Categorizado como <a href="https://qgustavor.tk/category/postagens/" rel="category tag">Postagens</a> </span></div>	</footer><!-- .entry-footer -->

				
</article><!-- #post-151 -->

	<nav class="navigation post-navigation" role="navigation" aria-label="Posts">
		<h2 class="screen-reader-text">Navegação de Post</h2>
		<div class="nav-links"><div class="nav-previous"><a href="https://qgustavor.tk/melhorias-no-planejamento/" rel="prev"><p class="meta-nav"><svg class="svg-icon" width="24" height="24" aria-hidden="true" role="img" focusable="false" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M20 13v-2H8l4-4-1-2-7 7 7 7 1-2-4-4z" fill="currentColor"/></svg>Post anterior</p><p class="post-title">Melhorias no planejamento</p></a></div><div class="nav-next"><a href="https://qgustavor.tk/migracao/" rel="next"><p class="meta-nav">Próximo post<svg class="svg-icon" width="24" height="24" aria-hidden="true" role="img" focusable="false" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="m4 13v-2h12l-4-4 1-2 7 7-7 7-1-2 4-4z" fill="currentColor"/></svg></p><p class="post-title">Migração</p></a></div></div>
	</nav>			</main><!-- #main -->
		</div><!-- #primary -->
	</div><!-- #content -->

	
	<aside class="widget-area">
		<section id="search-2" class="widget widget_search"><form role="search"  method="get" class="search-form" action="https://qgustavor.tk/">
	<label for="search-form-1">Pesquisar&hellip;</label>
	<input type="search" id="search-form-1" class="search-field" value="" name="s" />
	<input type="submit" class="search-submit" value="Pesquisar" />
</form>
</section>	</aside><!-- .widget-area -->


	<footer id="colophon" class="site-footer" role="contentinfo">

					<nav aria-label="Menu secundário" class="footer-navigation">
				<ul class="footer-navigation-wrapper">
					<li id="menu-item-25" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-25"><a href="https://twitter.com/qgustavor"><svg class="svg-icon" width="24" height="24" aria-hidden="true" role="img" focusable="false" width="24" height="24" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M22.23,5.924c-0.736,0.326-1.527,0.547-2.357,0.646c0.847-0.508,1.498-1.312,1.804-2.27 c-0.793,0.47-1.671,0.812-2.606,0.996C18.324,4.498,17.257,4,16.077,4c-2.266,0-4.103,1.837-4.103,4.103 c0,0.322,0.036,0.635,0.106,0.935C8.67,8.867,5.647,7.234,3.623,4.751C3.27,5.357,3.067,6.062,3.067,6.814 c0,1.424,0.724,2.679,1.825,3.415c-0.673-0.021-1.305-0.206-1.859-0.513c0,0.017,0,0.034,0,0.052c0,1.988,1.414,3.647,3.292,4.023 c-0.344,0.094-0.707,0.144-1.081,0.144c-0.264,0-0.521-0.026-0.772-0.074c0.522,1.63,2.038,2.816,3.833,2.85 c-1.404,1.1-3.174,1.756-5.096,1.756c-0.331,0-0.658-0.019-0.979-0.057c1.816,1.164,3.973,1.843,6.29,1.843 c7.547,0,11.675-6.252,11.675-11.675c0-0.178-0.004-0.355-0.012-0.531C20.985,7.47,21.68,6.747,22.23,5.924z"></path></svg><span class="screen-reader-text">Twitter</a></li>
<li id="menu-item-667" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-667"><a href="https://github.com/qgustavor/"><svg class="svg-icon" width="24" height="24" aria-hidden="true" role="img" focusable="false" width="24" height="24" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M12,2C6.477,2,2,6.477,2,12c0,4.419,2.865,8.166,6.839,9.489c0.5,0.09,0.682-0.218,0.682-0.484 c0-0.236-0.009-0.866-0.014-1.699c-2.782,0.602-3.369-1.34-3.369-1.34c-0.455-1.157-1.11-1.465-1.11-1.465 c-0.909-0.62,0.069-0.608,0.069-0.608c1.004,0.071,1.532,1.03,1.532,1.03c0.891,1.529,2.341,1.089,2.91,0.833 c0.091-0.647,0.349-1.086,0.635-1.337c-2.22-0.251-4.555-1.111-4.555-4.943c0-1.091,0.39-1.984,1.03-2.682 C6.546,8.54,6.202,7.524,6.746,6.148c0,0,0.84-0.269,2.75,1.025C10.295,6.95,11.15,6.84,12,6.836 c0.85,0.004,1.705,0.114,2.504,0.336c1.909-1.294,2.748-1.025,2.748-1.025c0.546,1.376,0.202,2.394,0.1,2.646 c0.64,0.699,1.026,1.591,1.026,2.682c0,3.841-2.337,4.687-4.565,4.935c0.359,0.307,0.679,0.917,0.679,1.852 c0,1.335-0.012,2.415-0.012,2.741c0,0.269,0.18,0.579,0.688,0.481C19.138,20.161,22,16.416,22,12C22,6.477,17.523,2,12,2z"></path></svg><span class="screen-reader-text">GitHub</a></li>
<li id="menu-item-666" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-666"><a href="https://anilist.co/user/qgustavor/"><svg class="svg-icon" width="24" height="24" aria-hidden="true" role="img" focusable="false" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid" viewBox="0 0 172 172"><path opacity="0.5" d="M111 111V41c0-4-2-6-6-6H91c-4 0-6 2-6 6v33l9 7c7 26 2 48-5 49 11 1 12 6 4 2 1-14 6-14 20 0l3 5h32c4 0 6-2 6-6v-14c0-4-2-6-6-6h-37z"/><path d="M54 35L18 137h28l6-17h31l6 17h28L81 35H54zm5 62l9-29 9 29H59z"/></svg><span class="screen-reader-text">AniList</a></li>
				</ul><!-- .footer-navigation-wrapper -->
			</nav><!-- .footer-navigation -->
				<div class="site-info">
			<div class="site-name">
																						<a href="https://qgustavor.tk/">blog do qgustavor</a>
																		</div><!-- .site-name -->
			<div class="powered-by">
				Orgulhosamente desenvolvido com <a href="https://br.wordpress.org/">WordPress</a>.			</div><!-- .powered-by -->

		</div><!-- .site-info -->
	</footer><!-- #colophon -->

</div><!-- #page -->

<script>
    document.querySelectorAll('form').forEach((form, index) => {
        const formAction = form.getAttribute('action');

        // TODO: check after stripping Site URL that result is '/' or '', to not affect
        // forms targeting /wp-admin.php etc
        const replacedFormAction = formAction.replace('https://qgustavor.tk', '' );

        console.log('replaced form action: ' + replacedFormAction);

        if ( replacedFormAction === '' || replacedFormAction === '/' ) {
            form.setAttribute( 'action', '/search/' );
        }
    });

</script>
<script>document.body.classList.remove("no-js");</script><button id="dark-mode-toggler" class="fixed-bottom" aria-pressed="false" onClick="toggleDarkMode()">Modo escuro: <span aria-hidden="true"></span></button>		<style>
			#dark-mode-toggler > span {
				margin-left: 5px;
			}
			#dark-mode-toggler > span::before {
				content: 'Desligado';
			}
			#dark-mode-toggler[aria-pressed="true"] > span::before {
				content: 'Ligado';
			}
					</style>

		<script>function toggleDarkMode() { // jshint ignore:line
	var toggler = document.getElementById( 'dark-mode-toggler' );

	if ( 'false' === toggler.getAttribute( 'aria-pressed' ) ) {
		toggler.setAttribute( 'aria-pressed', 'true' );
		document.documentElement.classList.add( 'is-dark-theme' );
		document.body.classList.add( 'is-dark-theme' );
		window.localStorage.setItem( 'twentytwentyoneDarkMode', 'yes' );
	} else {
		toggler.setAttribute( 'aria-pressed', 'false' );
		document.documentElement.classList.remove( 'is-dark-theme' );
		document.body.classList.remove( 'is-dark-theme' );
		window.localStorage.setItem( 'twentytwentyoneDarkMode', 'no' );
	}
}

function twentytwentyoneIsDarkMode() {
	var isDarkMode = window.matchMedia( '(prefers-color-scheme: dark)' ).matches;

	if ( 'yes' === window.localStorage.getItem( 'twentytwentyoneDarkMode' ) ) {
		isDarkMode = true;
	} else if ( 'no' === window.localStorage.getItem( 'twentytwentyoneDarkMode' ) ) {
		isDarkMode = false;
	}

	return isDarkMode;
}

function darkModeInitialLoad() {
	var toggler = document.getElementById( 'dark-mode-toggler' ),
		isDarkMode = twentytwentyoneIsDarkMode();

	if ( isDarkMode ) {
		document.documentElement.classList.add( 'is-dark-theme' );
		document.body.classList.add( 'is-dark-theme' );
	} else {
		document.documentElement.classList.remove( 'is-dark-theme' );
		document.body.classList.remove( 'is-dark-theme' );
	}

	if ( toggler && isDarkMode ) {
		toggler.setAttribute( 'aria-pressed', 'true' );
	}
}

function darkModeRepositionTogglerOnScroll() {

	var toggler = document.getElementById( 'dark-mode-toggler' ),
		prevScroll = window.scrollY || document.documentElement.scrollTop,
		currentScroll,

		checkScroll = function() {
			currentScroll = window.scrollY || document.documentElement.scrollTop;
			if (
				currentScroll + ( window.innerHeight * 1.5 ) > document.body.clientHeight ||
				currentScroll < prevScroll
			) {
				toggler.classList.remove( 'hide' );
			} else if ( currentScroll > prevScroll && 250 < currentScroll ) {
				toggler.classList.add( 'hide' );
			}
			prevScroll = currentScroll;
		};

	if ( toggler ) {
		window.addEventListener( 'scroll', checkScroll );
	}
}

darkModeInitialLoad();
darkModeRepositionTogglerOnScroll();
</script>	<script>
	if ( -1 !== navigator.userAgent.indexOf( 'MSIE' ) || -1 !== navigator.appVersion.indexOf( 'Trident/' ) ) {
		document.body.classList.add( 'is-IE' );
	}
	</script>
	<script type="text/javascript">var algolia = {"debug":false,"application_id":"ENUJEVMZVE","search_api_key":"4aaa29daeb6f57235e9cea4cfb79e597","powered_by_enabled":true,"query":"","autocomplete":{"sources":[],"input_selector":"input[name='s']:not('.no-autocomplete')"},"indices":{"searchable_posts":{"name":"wp_searchable_posts","id":"searchable_posts","enabled":true,"replicas":[]}}};</script><script id='twenty-twenty-one-ie11-polyfills-js-after'>
( Element.prototype.matches && Element.prototype.closest && window.NodeList && NodeList.prototype.forEach ) || document.write( '<script src="https://qgustavor.tk/wp-content/themes/twentytwentyone/assets/js/polyfills.js?ver=1.0.0"></scr' + 'ipt>' );
</script>
<script src='https://qgustavor.tk/wp-content/themes/twentytwentyone/assets/js/primary-navigation.js?ver=1.0.0' id='twenty-twenty-one-primary-navigation-script-js'></script>
<script src='https://qgustavor.tk/wp-content/themes/twentytwentyone/assets/js/responsive-embeds.js?ver=1.0.0' id='twenty-twenty-one-responsive-embeds-script-js'></script>
	<script>
	/(trident|msie)/i.test(navigator.userAgent)&&document.getElementById&&window.addEventListener&&window.addEventListener("hashchange",(function(){var t,e=location.hash.substring(1);/^[A-z0-9_-]+$/.test(e)&&(t=document.getElementById(e))&&(/^(?:a|select|input|button|textarea)$/i.test(t.tagName)||(t.tabIndex=-1),t.focus())}),!1);
	</script>
	
</body>
</html>
